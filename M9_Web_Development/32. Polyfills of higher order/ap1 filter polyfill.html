<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ap1 filter polyfill</title>
</head>

<body>
    <!-- Write your code solution here, inside the filter function -->
    <!-- WARNING:
        Don't make any changes outside the given function. (would fail test cases)
        Write the required code and return the correct answer. -->
    <script id='solution' defer>
        function filter(arr, callback) {
            // Write your solution here ========================
            // validate inputs
            if (!Array.isArray(arr)) {
                throw new TypeError('First argument must be an array');
            }
            if (typeof callback !== 'function') {
                throw new TypeError('Second argument must be a function');
            }
            // Result array (grows dynamically - dense)
            const result = [];
            // Iterate through ALL indices (0 to length-1)
            for (let i = 0; i < arr.length; i++){
                // Only process existing elements (skip sparse holes)
                if (i in arr) {
                    // Full callback signature: (element, index, array)
                    if (callback(arr[i], i, arr)){
                        // Truthy → add to result
                        result.push(arr[i]);
                    }
                    // Falsy → skip
                }
                // Holes completely ignored (no undefined pushed)
            }
            return result;
        }
        arr = [1, 2 , 3, 4, 5];
        result = filter(arr,num  => num % 2 === 0);
        console.log(result); // Output: [2, 4]
    </script>
</body>

</html>