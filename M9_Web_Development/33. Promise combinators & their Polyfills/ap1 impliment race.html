<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ap1 race</title>
</head>


<body>
    <!-- Write your code solution here, inside the main function -->
    <!-- WARNING:
        Don't make any changes outside the given function. (would fail test cases)
        Write the required code and return the correct answer. -->
    <script id='solution' defer>
        function promiseRace(iterable) {
            //write your code here ===============================================

            // Handle empty iterable - return forever-pending promise
            if (!iterable || iterable.length === 0) {
                return new Promise(() => {});  // Never resolves/rejects
            }
            
            // Create race promise
            return new Promise((resolve, reject) => {
                iterable.forEach(promise => {
                    // Normalize to promise (handles values/immediate promises)
                    Promise.resolve(promise)
                        .then(result => {
                            // FIRST to settle WINS (resolve)
                            resolve(result);
                        })
                        .catch(error => {
                            // FIRST to reject WINS (reject)  
                            reject(error);
                        });
                });
            });
        }

        // Forever pending
        // promiseRace([]);  // Never settles

        // Immediate values  
        // promiseRace([42, Promise.resolve(1)])  // 42

        // Mixed immediate + delayed
        // promiseRace([Promise.reject('fast'), Promise.resolve('slow')])

        // Non-promise first
        // promiseRace(['hello', Promise.resolve(123)])  // "hello"

    </script>
</body>

</html>